<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>savetheunion.gov</title>
  <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nothing+You+Could+Do|Special+Elite" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Spectral+SC&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    @keyframes shakes {
      0% {
        transform: translate(2px, 1px) rotate(1deg);
      }
      50% {
        transform: translate(-1px, 1px) rotate(0deg);
      }
      100% {
        transform: translate(1px, -2px) rotate(0deg);
      }
    }

    @keyframes bigshakes {
      0% {
        transform: translate(2px, -8px) rotate(-1deg);
      }
      50% {
        transform: translate(-9px, 10px) rotate(-18deg);
      }
      100% {
        transform: translate(6px, -2px) rotate(1deg);
      }
    }

    @keyframes glow {
      0% {
        box-shadow: 0px 0px 40px rgba(255, 255, 255, 0.5);
      }
      50% {
        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.35);
      }
      100% {
        box-shadow: 0px 0px 40px rgba(255, 255, 255, 0.5);
      }
    }

    /* ‚Äî‚Äî‚Äî Your Original Styles ‚Äî‚Äî‚Äî */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      position: fixed;
      width: 100%;
    }
    body {
      background-color: #2e2e2e;
      font-family: Arial, sans-serif;
    }
    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }
    .background-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.2);
      transition: transform 0.1s ease-out;
      will-change: transform;
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;
    }
    header {
      background: #252525;
      color: #ffffff;
      padding: 10px 0;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 10;
      position: relative;
      cursor: default;
    }
    .content {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      color: #ebebeb;
      height: calc(100vh - 140px); /* Account for header and footer */
      overflow-y: auto;
    }
    main {
      width: 90%;
      max-width: 825px;
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.5);
      border-radius: 15px;
      padding: 10px 30px 30px 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      position: relative;
      cursor: default;
      animation: glow 3s linear infinite;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.1'/%3E%3C/svg%3E");
    }
    footer {
      text-align: center;
      padding: 10px 0;
      background: linear-gradient(to top, #252525, #1a1a1a);
      color: #ffffff;
      position: fixed;
      bottom: 0;
      width: 100%;
      box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
      z-index: 5;
      border-top: 2px solid rgba(255, 255, 255, 0.1);
    }
    .footer-links {
      margin-top: 5px;
      font-size: 14px;
    }
    .footer-links a,
    .footer-links button {
      color: #ffffff;
      text-decoration: none;
      margin: 0 10px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      position: relative;
    }
    .footer-links a:hover,
    .footer-links button:hover {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
    }
    .footer-links a::after,
    .footer-links button::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 1px;
      bottom: -2px;
      left: 0;
      background-color: currentColor;
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.3s ease;
    }
    .footer-links a:hover::after,
    .footer-links button:hover::after {
      transform: scaleX(1);
      transform-origin: left;
    }
    .footer-links a::before,
    .footer-links button::before {
      display: none !important;
    }
    .input-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(30, 30, 30, 0.9);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      z-index: 12;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 400px;
    }
    .login-popup h2,
    .login-popup p {
      color: white;
    }
    .input-field,
    .login-button {
      width: 90%;
      height: 50px;
      margin-bottom: 15px;
      font-size: 16px;
      border-radius: 5px;
    }
    .input-field {
      border: 1px solid #ccc;
      padding: 10px;
      background-color: rgba(255, 255, 255, 0.9);
    }
    .input-field:focus {
      outline: none;
      border-color: #007BFF;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
      background-color: #fff;
    }
    .login-button {
      border: none;
      background-color: #007BFF;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    .login-button:hover {
      background-color: #686868;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }
    .login-button:active {
      transform: translateY(0);
    }
    ::-webkit-scrollbar {
      width: 12px;
      background: rgba(0, 0, 0, 0.2);
    }
    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: content-box;
      transition: background 0.3s ease;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #888;
    }
    #page-blur-wrapper.blurred::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      background-color: rgba(0, 0, 0, 0.2);
      z-index: 11;
      pointer-events: none;
    }
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(to bottom, #252525, #1a1a1a);
      padding: 10px 20px;
      position: relative;
      border-bottom: 2px solid rgba(255, 255, 255, 0.1);
      animation: fadeInDown 1s ease-out;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }
    .left, .center, .right {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .left {
      justify-content: flex-start;
      gap: 10px;
    }
    .logo {
      width: 80px;
      height: 90px;
      transition: transform 0.3s ease;
      transform: translateY(5px);
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    }
    .logo:hover {
      transform: scale(1.05) translateY(5px);
      filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4));
    }
    .union-text {
      color: #ffffff;
      font-size: 1.5rem;
      white-space: nowrap;
      font-style: bold;
      font-family: 'Satisfy', cursive;
    }
    .intro-section {
      color: #f0f0f0;
      font-size: 1.1rem;
      line-height: 1.6;
    }
    .navigation-overview {
      color: #eeeeee;
      font-size: 1.05rem;
      line-height: 1.5;
    }
    .navigation-overview h3 {
      margin-bottom: 15px;
      font-size: 1.6rem;
      color: #ffffff;
      text-align: center;
    }
    .navigation-overview ul {
      list-style-type: 'ü™ñ ';
      padding-left: 20px;
    }
    .navigation-overview a {
      color: #4ea6ff;
      text-decoration: none;
    }
    .navigation-overview a:hover {
      text-decoration: underline;
    }
    .intro-section h2 {
      text-align: center !important;
    }
    #easter-egg-btn {
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 5px;
      height: 5px;
      background: transparent;
      border: none;
      cursor: none;
    }

    /* ‚Äî‚Äî‚Äî FILM-GRAIN OVERLAY STYLES ‚Äî‚Äî‚Äî */
    .film, .effect, .grain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      overflow: hidden;
    }
    .film, .effect {
      filter: blur(0.45px) drop-shadow(0 0 0 #fff1);
    }
    .film::after, .effect::after {
      content: '';
      position: absolute;
      width: 120%;
      height: 100%;
      top: 0;
      left: 0;
      padding-left: 100px;
      opacity: 0.5;
      background: repeating-linear-gradient(
        90deg,
        #0002 0 2px,
        transparent 4px 37vmin
      );
    }
    .film::after {
      animation: film-scratch 0.45s steps(1) infinite, grain 0.5s steps(1) infinite;
    }
    .effect::after {
      left: 30%;
      animation: effect-scratch 2s infinite;
    }
    .grain::after {
      content: '';
      position: absolute;
      width: 110%;
      height: 110%;
      top: -5%;
      left: -5%;
      opacity: 0.25;
      background-image:
        repeating-conic-gradient(#000 0%, transparent .0005%),
        repeating-conic-gradient(#000 0%, transparent .0009%);
      animation: grain 0.5s steps(1) infinite;
      filter: drop-shadow(0 0 1px #000);
    }
    @keyframes grain {
      0%,100%   { transform: translate(0,0); }
      10%       { transform: translate(-1.2%,-1%); }
      20%       { transform: translate(1.73845%,1.4444%); }
      30%       { transform: translate(-2%,-2%); }
      40%       { transform: translate(3%,3%); }
      50%       { transform: translate(-3.324%,-3%); }
      60%       { transform: translate(4%,4%); }
      70%       { transform: translate(-4%,-4.2344%); }
      80%       { transform: translate(2.1%,2%); }
      90%       { transform: translate(-3%,-3.4444%); }
    }
    @keyframes film-scratch {
      0%,100%   { transform: translateX(0); opacity: 0.5; }
      30%       { transform: translateX(-2%); opacity: 0.75; }
      80%       { transform: translateX(10%); opacity: 0.25; }
    }
    @keyframes effect-scratch {
      0%        { transform: translateX(0); opacity: 0.75; }
      50%       { transform: translateX(-3%); opacity: 0.5; }
      100%      { transform: translateX(30%); }
    }
    /* ‚îÄ‚îÄ TOGGLE PANEL STYLES ‚îÄ‚îÄ */
    #toggles {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 10001;             /* above everything */
      background: rgba(0,0,0,0.6);
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 14px;
      color: #fff;
      display: flex;
      gap: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    #toggles input {
      display: none;              /* hide the actual checkbox */
    }
    #toggles label {
      cursor: pointer;
      user-select: none;
    }
    #toggles label:hover {
      text-decoration: underline;
    }

    /* ‚îÄ‚îÄ FILM-GRAIN TOGGLE ‚îÄ‚îÄ */
    #toggle-film:not(:checked) ~ .background-container .film,
    #toggle-film:not(:checked) ~ .background-container .effect,
    #toggle-film:not(:checked) ~ .background-container .grain {
      display: none !important;
    }

    /* ‚îÄ‚îÄ B&W FILTER TOGGLE ‚îÄ‚îÄ */
    #toggle-bw:checked ~ #page-blur-wrapper {
      filter: grayscale(100%);
      transition: filter 0.3s ease-in-out;
    }

    body.bw {
      filter: grayscale(100%);
      transition: filter 0.3s ease-in-out;
    }

    body.bw img {
      filter: grayscale(100%);
    }

    /* Toggle State Classes */
    body.no-grain .film,
    body.no-grain .effect,
    body.no-grain .grain,
    body.no-grain #shakewrap {
      display: none !important;
    }

    /* Add shake effect wrapper */
    #shakewrap {
      z-index: 1;
      pointer-events: none;
      height: 100vmax;
      width: 120%;
      position: fixed;
      top: -20px;
      left: -20px;
      animation: bigshakes 0.1s linear infinite;
      opacity: 0.5;
      background-color: #111;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 65%, rgba(0, 0, 0, 1) 100%);
    }

    /* Add subtle underline effect */
    a::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 1px;
      bottom: -2px;
      left: 0;
      background-color: currentColor;
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.3s ease;
    }

    a:hover {
      text-shadow: 0px 0px 18px rgba(255, 0, 0, 1);
      animation: shakes 0.1s linear infinite;
    }

    a:hover::after {
      transform: scaleX(1);
      transform-origin: left;
    }

    /* Add subtle text shadow to headings */
    h1, h2, h3 {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    /* Add transition for smooth font changes */
    body, body * {
      transition: font-family 0.5s ease, letter-spacing 0.5s ease;
    }

    /* Old-timey font styles */
    .old-timey *:not(.logo):not(script):not(style):not(.input-container) {
      letter-spacing: 0.03em;
    }

    /* Headers and titles - Commanding, historical tone */
    .old-timey h1, 
    .old-timey h2, 
    .old-timey h3, 
    .old-timey .site-title {
      font-family: 'Special Elite', cursive !important;
    }

    /* Navigation and buttons - Period-appropriate legibility */
    .old-timey .navigation-overview a,
    .old-timey .footer-links a,
    .old-timey .footer-links button {
      font-family: 'Spectral SC', serif !important;
    }

    /* Main content text - Readable with hand-typed feel */
    .old-timey .intro-section p,
    .old-timey .navigation-overview p,
    .old-timey .navigation-overview li {
      font-family: 'Crimson Pro', serif !important;
    }

    /* Login/Input Text - Keep mostly readable */
    .old-timey .input-field,
    .old-timey .login-button,
    .old-timey .login-popup p {
      font-family: 'Cutive Mono', monospace !important;
    }

    /* Logo / Branding - Calligraphy for flair */
    .old-timey .union-text {
      font-family: 'Great Vibes', cursive !important;
    }

    /* Footer text */
    .old-timey footer p {
      font-family: 'Spectral SC', serif !important;
    }

    /* Add impressive transitions */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }

    @keyframes float {
      0% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-5px);
      }
      100% {
        transform: translateY(0px);
      }
    }

    /* Apply animations to elements */
    .page-header {
      animation: fadeInDown 1s ease-out;
    }

    .logo {
      animation: float 6s ease-in-out infinite;
    }

    .union-text {
      animation: fadeInRight 1s ease-out;
    }

    .site-title {
      animation: fadeInLeft 1s ease-out;
    }

    .intro-section {
      animation: fadeInUp 1s ease-out;
    }

    .navigation-overview {
      animation: fadeInUp 1s ease-out 0.3s backwards;
    }

    footer {
      animation: fadeInUp 1s ease-out;
    }

    /* Enhanced hover effects */
    .navigation-overview a {
      position: relative;
      transition: all 0.3s ease;
    }

    .navigation-overview a:hover {
      transform: translateX(5px);
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
    }

    .navigation-overview a::before {
      content: '‚Üí';
      position: absolute;
      left: -20px;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .navigation-overview a:hover::before {
      opacity: 1;
      left: -15px;
    }

    /* Enhanced button effects */
    .login-button {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .login-button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .login-button:hover::before {
      width: 300px;
      height: 300px;
    }

    /* Enhanced input field effects */
    .input-field {
      transition: all 0.3s ease;
    }

    .input-field:focus {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    /* Add pulse animation to important elements */
    .union-text:hover {
      animation: pulse 1s infinite;
    }

    /* Enhanced film grain effect */
    .film::after {
      animation: film-scratch 0.45s steps(1) infinite, grain 0.5s steps(1) infinite, float 6s ease-in-out infinite;
    }

    /* Add transition to toggle panel */
    #toggles {
      transition: all 0.3s ease;
    }

    #toggles:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    }

    /* Add transition to footer links */
    .footer-links a, .footer-links button {
      transition: all 0.3s ease;
    }

    .footer-links a:hover, .footer-links button:hover {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
    }
  </style>
</head>

<body>
  <div id="shakewrap"></div>
  <div id="toggles">
    <input type="checkbox" id="toggle-film" checked>
    <label for="toggle-film">üéûÔ∏è Film-Grain</label>

    <input type="checkbox" id="toggle-bw" checked>
    <label for="toggle-bw">‚ö´‚ö™ B&amp;W</label>
  </div>
  <div class="background-container">
    <img src="/images/background.jpg" alt="Background" class="background-image" />
  </div>

  <div id="page-blur-wrapper">
    <header id="header" class="page-header">
      <div class="left">
        <img src="/images/union-logo.png" alt="Union Logo" class="logo" />
        <span class="union-text">The Union</span>
      </div>
      <div class="center">
        <h1 class="site-title">Welcome to the Union, soldier!</h1>
      </div>
      <div class="right"></div>
    </header>

    <div class="content" id="content">
      <main>
        <section class="intro-section">
          <h2>Welcome to the Union Army, Soldier</h2>
          <p>
            The year is 1863. The nation is torn in two ‚Äî brother fighting brother, neighbor turning against neighbor. 
            You've answered the call of President Lincoln and pledged your allegiance to the Union. 
            Your journey begins now.
          </p>
          <p>
            This guide will prepare you for the challenges ahead. From the grueling drills of basic training to the mud and misery of camp life,
            from the stifling wool of your uniform to the roar of cannon fire on the battlefield ‚Äî every page here is designed to give you a fighting chance.
          </p>
          <p>
            You'll learn what to eat, what to wear, how to march, and how to survive. Hygiene may be poor, medicine primitive, and comfort scarce ‚Äî 
            but with the Union behind you and freedom ahead of you, you will endure.
          </p>
          <p style="font-weight: bold;">
            Prepare yourself, recruit. Your country is counting on you.
          </p>
        </section>

        <section class="navigation-overview">
          <h3>üó∫Ô∏è What You'll Find in This Guide</h3>
          <p>
            As a Union soldier, preparation is your best weapon. This guidebook is divided into clear sections to help you survive and serve with honor:
          </p>
          <ul>
            <li><strong><a href="about.html">About the Union Army</a></strong> ‚Äì Learn about the cause we fight for and the structure of our forces.</li>
            <li><strong><a href="training.html">Enlistment & Training</a></strong> ‚Äì What it takes to become a soldier, from drills to discipline.</li>
            <li><strong><a href="uniform.html">Uniform & Equipment</a></strong> ‚Äì Get to know your gear before you march into battle.</li>
            <li><strong><a href="hygiene.html">Camp Life & Hygiene</a></strong> ‚Äì Life between the fights: meals, illness, and survival tips.</li>
            <li><strong><a href="battles.html">Major Battles & Tactics</a></strong> ‚Äì Where we've been, how we fight, and why it matters.</li>
          </ul>
          <p>
            New recruits are encouraged to explore each section thoroughly. Your survival ‚Äî and victory ‚Äî may depend on it.
          </p>
        </section>
      </main>
    </div>

    <footer>
      <p>&copy; 1863 Union Army</p>
      <div class="footer-links">
        <a href="#" onclick="openGmail()">Contact</a>
        <a href="../index.html">Home</a>
        <button id="logout-button" style="display: none;" onclick="logout()">Logout</button>
        <button id="signin-button" style="display: none;" onclick="window.location.href='signup.html'">Sign In</button>
        <button id="easter-egg-btn" aria-label="Easter Egg Button"></button>
      </div>
    </footer>
  </div>

  <div class="input-container" id="input-container">
    <div class="login-popup">
      <h2>Login</h2>
      <input type="text" id="soldier-name-input" class="input-field" placeholder="Enter your soldier name" />
      <input type="password" id="password-input" class="input-field" placeholder="Enter your password" />
      <button id="login-button" class="login-button">Login</button>
      <p id="login-message" style="color: red; display: none;"></p>
      <p style="color: white;">Don't have an account? <a href="signup.html" style="color: rgb(255, 255, 255);">Sign Up</a></p>
    </div>
  </div>

  <script>
    function openGmail() {
      window.open('https://mail.google.com/mail/?view=cm&fs=1&to=zaneamater@gmail.com', '_blank');
    }

    // Add bw class to body on load
    document.body.classList.add('bw');

    const inputContainer = document.getElementById('input-container');
    const pageWrapper = document.getElementById('page-blur-wrapper');

    function showInputContainer() {
      inputContainer.style.display = 'flex';
      pageWrapper.classList.add('blurred');
    }

    function hideInputContainer() {
      inputContainer.style.display = 'none';
      pageWrapper.classList.remove('blurred');
    }

    const storedName = localStorage.getItem('userName');
    if (storedName) {
      hideInputContainer();
      document.getElementById('logout-button').style.display = 'inline';
    } else {
      showInputContainer();
      document.getElementById('signin-button').style.display = 'inline';
    }

    document.getElementById('login-button').addEventListener('click', function () {
      const soldierName = document.getElementById('soldier-name-input').value;
      const password = document.getElementById('password-input').value;

      fetch('/credentials')
        .then(response => response.json())
        .then(credentials => {
          const user = credentials.find(cred => cred.soldierName === soldierName);
          const messageElement = document.getElementById('login-message');

          if (user) {
            if (user.password === password) {
              localStorage.setItem('userName', user.soldierName);
              messageElement.style.color = 'green';
              messageElement.innerText = 'Correct password, signing in!';
              messageElement.style.display = 'block';
              hideInputContainer();
              document.getElementById('logout-button').style.display = 'inline';
              document.getElementById('signin-button').style.display = 'none';
            } else {
              messageElement.style.color = 'red';
              messageElement.innerText = 'Incorrect password';
              messageElement.style.display = 'block';
            }
          } else {
            messageElement.style.color = 'red';
            messageElement.innerText = 'User not found';
            messageElement.style.display = 'block';
          }
        })
        .catch(error => {
          console.error('Error fetching credentials:', error);
          const messageElement = document.getElementById('login-message');
          messageElement.style.color = 'red';
          messageElement.innerText = 'Error logging in. Please try again.';
          messageElement.style.display = 'block';
        });
    });

    function logout() {
      localStorage.removeItem("userName");
      location.reload();
    }

    // Film-grain toggle
    document
      .getElementById('toggle-film')
      .addEventListener('change', e =>
        document.body.classList.toggle('no-grain', !e.target.checked)
      );

    // B&W toggle
    document
      .getElementById('toggle-bw')
      .addEventListener('change', e =>
        document.body.classList.toggle('bw', e.target.checked)
      );

    // üõ∞Ô∏è Tracking
    function sendTrackingEvent(eventType, extraData = {}) {
      const data = {
        eventType: eventType,
        timestamp: new Date().toISOString(),
        userAgent: navigator.userAgent,
        screenWidth: window.innerWidth,
        screenHeight: window.innerHeight,
        referrer: document.referrer,
        url: window.location.href,
        ...extraData
      };

      fetch('/track', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      }).then(() => {
        console.log('Tracking event sent');
      }).catch(err => {
        console.error('Tracking error:', err);
      });
    }
  </script>
  <script>
    const eggBtn = document.getElementById('easter-egg-btn');
    eggBtn.addEventListener('click', () => {
      alert("üéâ You found the Easter Egg! üéâ");
    });

    // Add old-timey font toggle
    const toggleFilm = document.getElementById('toggle-film');
    toggleFilm.addEventListener('change', function () {
      document.body.classList.toggle('old-timey', this.checked);
    });

    // Apply correct font state on load
    if (toggleFilm.checked) {
      document.body.classList.add('old-timey');
    }
  </script>
  <div class="film"></div>
  <div class="effect"></div>
  <div class="grain"></div>
</body>
</html>
