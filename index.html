<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>savetheunion.gov</title>
  <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-x: hidden;
    }

    body {
      background-color: #2e2e2e;
      font-family: Arial, sans-serif;
    }

    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }

    .background-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.2);
      transition: transform 0.1s ease-out;
      will-change: transform;
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;
    }

    header {
      background: #252525;
      color: #ffffff;
      padding: 10px 0;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 10;
      position: relative;
      cursor: default;
    }

    .content {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      color: #ebebeb;
    }

    main {
      width: 90%;
      max-width: 825px;
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.5);
      border-radius: 15px;
      overflow-y: auto;
      padding: 10px 30px 30px 30px; /* ‚¨ÖÔ∏è Top, Right, Bottom, Left */
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      position: relative;
      cursor: default;
    }

    footer {
      text-align: center;
      padding: 10px 0;
      background: rgba(37, 37, 37, 0.8);
      color: #ffffff;
      position: absolute;
      bottom: 0;
      width: 100%;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
      z-index: 10;
      cursor: default;
    }

    .footer-links {
      margin-top: 5px;
      font-size: 14px;
    }

    .footer-links a,
    .footer-links button {
      color: #ffffff;
      text-decoration: none;
      margin: 0 10px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }

    .footer-links a:hover,
    .footer-links button:hover {
      text-decoration: underline;
    }

    .input-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(30, 30, 30, 0.9);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      z-index: 12;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 400px;
    }

    .login-popup h2,
    .login-popup p {
      color: white;
    }

    .input-field,
    .login-button {
      width: 90%;
      height: 50px;
      margin-bottom: 15px;
      font-size: 16px;
      border-radius: 5px;
    }

    .input-field {
      border: 1px solid #ccc;
      padding: 10px;
      background-color: #d3d3d3;
    }

    .login-button {
      border: none;
      background-color: #007BFF;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .login-button:hover {
      background-color: #686868;
    }

    ::-webkit-scrollbar {
      width: 12px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: content-box;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #888;
    }

    /* ‚úÖ Unified blur overlay using wrapper */
    #page-blur-wrapper.blurred::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      background-color: rgba(0, 0, 0, 0.2);
      z-index: 11;
      pointer-events: none;
    }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #252525;
      padding: 10px 20px;
      position: relative;
    }

    .left, .center, .right {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .left {
      justify-content: flex-start;
      gap: 10px;
    }

    .logo {
      width: 80px;
      height: 90px;
    }

    .union-text {
      color: #ffffff;
      font-size: 1.5rem;
      white-space: nowrap;
      font-style: bold;
      font-family: 'Satisfy', cursive;
    }
    .intro-section {
      color: #f0f0f0;
      font-size: 1.1rem;
      line-height: 1.6;
    }    
    .navigation-overview {
      color: #eeeeee;
      font-size: 1.05rem;
      line-height: 1.5;
    }
    
    .navigation-overview h3 {
      margin-bottom: 15px;
      font-size: 1.6rem;
      color: #ffffff;
    }
    
    .navigation-overview ul {
      list-style-type: 'ü™ñ ';
      padding-left: 20px;
    }
    
    .navigation-overview a {
      color: #4ea6ff;
      text-decoration: none;
    }
    
    .navigation-overview a:hover {
      text-decoration: underline;
    }
    .intro-section h2 {
      text-align: center !important;
    }    
    .navigation-overview h3 {
      text-align: center !important;
    }    
    #easter-egg-btn {
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 5px;
      height: 5px;
      background: transparent;
      border: none;
      cursor: none;
      /* Optional: add a tiny hitbox for easier clicking */
      /* box-shadow: 0 0 10px 10px transparent; */
    }
  </style>
</head>

<body>
  <div class="background-container">
    <img src="/images/background.jpg" alt="Background" class="background-image" />
  </div>

  <!-- ‚úÖ New Blur Wrapper -->
  <div id="page-blur-wrapper">
    <header id="header" class="page-header">
      <div class="left">
        <img src="/images/union-logo.png" alt="Union Logo" class="logo" />
        <span class="union-text">The Union</span>
      </div>
      <div class="center">
        <h1 class="site-title">Welcome to the Union, soldier!</h1>
      </div>
      <div class="right"></div>
    </header>

    <div class="content" id="content">
      <main>
        <section class="intro-section">
          <h2>Welcome to the Union Army, Soldier</h2>
          <p>
            The year is 1863. The nation is torn in two ‚Äî brother fighting brother, neighbor turning against neighbor. 
            You‚Äôve answered the call of President Lincoln and pledged your allegiance to the Union. 
            Your journey begins now.
          </p>
        
          <p>
            This guide will prepare you for the challenges ahead. From the grueling drills of basic training to the mud and misery of camp life,
            from the stifling wool of your uniform to the roar of cannon fire on the battlefield ‚Äî every page here is designed to give you a fighting chance.
          </p>
        
          <p>
            You‚Äôll learn what to eat, what to wear, how to march, and how to survive. Hygiene may be poor, medicine primitive, and comfort scarce ‚Äî 
            but with the Union behind you and freedom ahead of you, you will endure.
          </p>
        
          <p style="font-weight: bold;">
            Prepare yourself, recruit. Your country is counting on you.
          </p>
        </section>
        <section class="navigation-overview">
          <h3>üó∫Ô∏è What You‚Äôll Find in This Guide</h3>
          <p>
            As a Union soldier, preparation is your best weapon. This guidebook is divided into clear sections to help you survive and serve with honor:
          </p>
        
          <ul>
            <li><strong><a href="about.html">About the Union Army</a></strong> ‚Äì Learn about the cause we fight for and the structure of our forces.</li>
            <li><strong><a href="training.html">Enlistment & Training</a></strong> ‚Äì What it takes to become a soldier, from drills to discipline.</li>
            <li><strong><a href="uniform.html">Uniform & Equipment</a></strong> ‚Äì Get to know your gear before you march into battle.</li>
            <li><strong><a href="hygiene.html">Camp Life & Hygiene</a></strong> ‚Äì Life between the fights: meals, illness, and survival tips.</li>
            <li><strong><a href="battles.html">Major Battles & Tactics</a></strong> ‚Äì Where we‚Äôve been, how we fight, and why it matters.</li>
          </ul>          
        
          <p>
            New recruits are encouraged to explore each section thoroughly. Your survival ‚Äî and victory ‚Äî may depend on it.
          </p>
        </section>        
      </main>
    </div>

    <footer>
      <p>&copy; 1863 Union Army</p>
      <div class="footer-links">
        <a href="#" onclick="openGmail()">Contact</a>
        <a href="../index.html">Home</a>
        <button id="logout-button" style="display: none;" onclick="logout()">Logout</button>
        <button id="signin-button" style="display: none;" onclick="window.location.href='signup.html'">Sign In</button>
        <button id="easter-egg-btn" aria-label="Easter Egg Button"></button>
      </div>
    </footer>
  </div>

  <div class="input-container" id="input-container">
    <div class="login-popup">
      <h2>Login</h2>
      <input type="text" id="soldier-name-input" class="input-field" placeholder="Enter your soldier name" />
      <input type="password" id="password-input" class="input-field" placeholder="Enter your password" />
      <button id="login-button" class="login-button">Login</button>
      <p id="login-message" style="color: red; display: none;"></p>
      <p style="color: white;">Don't have an account? <a href="signup.html" style="color: rgb(255, 255, 255);">Sign Up</a></p>
    </div>
  </div>

  <script>
    function openGmail() {
      window.open('https://mail.google.com/mail/?view=cm&fs=1&to=zaneamater@gmail.com', '_blank');
    }

    const inputContainer = document.getElementById('input-container');
    const pageWrapper = document.getElementById('page-blur-wrapper');

    function showInputContainer() {
      inputContainer.style.display = 'flex';
      pageWrapper.classList.add('blurred');
    }

    function hideInputContainer() {
      inputContainer.style.display = 'none';
      pageWrapper.classList.remove('blurred');
    }

    const storedName = localStorage.getItem('userName');
    if (storedName) {
      hideInputContainer();
      document.getElementById('logout-button').style.display = 'inline';
    } else {
      showInputContainer();
      document.getElementById('signin-button').style.display = 'inline';
    }

    document.getElementById('login-button').addEventListener('click', function () {
      const soldierName = document.getElementById('soldier-name-input').value;
      const password = document.getElementById('password-input').value;

      fetch('/credentials')
        .then(response => response.json())
        .then(credentials => {
          const user = credentials.find(cred => cred.soldierName === soldierName);
          const messageElement = document.getElementById('login-message');

          if (user) {
            if (user.password === password) {
              localStorage.setItem('userName', user.soldierName);
              messageElement.style.color = 'green';
              messageElement.innerText = 'Correct password, signing in!';
              messageElement.style.display = 'block';
              hideInputContainer();
              document.getElementById('logout-button').style.display = 'inline';
              document.getElementById('signin-button').style.display = 'none';
            } else {
              messageElement.style.color = 'red';
              messageElement.innerText = 'Incorrect password';
              messageElement.style.display = 'block';
            }
          } else {
            messageElement.style.color = 'red';
            messageElement.innerText = 'User not found';
            messageElement.style.display = 'block';
          }
        })
        .catch(error => {
          console.error('Error fetching credentials:', error);
          const messageElement = document.getElementById('login-message');
          messageElement.style.color = 'red';
          messageElement.innerText = 'Error logging in. Please try again.';
          messageElement.style.display = 'block';
        });
    });

    function logout() {
      localStorage.removeItem("userName");
      location.reload();
    }

    // üéûÔ∏è Parallax background
    const bgImage = document.querySelector(".background-image");
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      const parallaxSpeed = 0.3;
      bgImage.style.transform = `scale(1.2) translateY(${scrollY * parallaxSpeed}px)`;
    });

    // üõ∞Ô∏è Tracking
    function sendTrackingEvent(eventType, extraData = {}) {
      const data = {
        eventType: eventType,
        timestamp: new Date().toISOString(),
        userAgent: navigator.userAgent,
        screenWidth: window.innerWidth,
        screenHeight: window.innerHeight,
        referrer: document.referrer,
        url: window.location.href,
        ...extraData
      };

      fetch('/track', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      }).then(() => {
        console.log('Tracking event sent');
      }).catch(err => {
        console.error('Tracking error:', err);
      });
    }
  </script>
  <script>
    const eggBtn = document.getElementById('easter-egg-btn');
    eggBtn.addEventListener('click', () => {
      alert("üéâ You found the Easter Egg! üéâ");
    });
  </script>
</body>
</html>
